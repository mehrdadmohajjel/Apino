@model TopMenuViewModel
@using System.Linq
@using Apino.Application.Dtos

<ul class="navbar-nav align-items-md-center">

    <li class="nav-item">
        <a href="/Home" class="nav-link">خانه</a>
    </li>

    <!-- Branches -->
    <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
            لیست شعب
        </a>
        <ul class="dropdown-menu">
            @foreach (var branch in Model.Branches)
            {
                <li>
                    <a href="javascript:void(0)"
                       class="dropdown-item branch-link"
                       data-id="@branch.Id">
                        @branch.Title
                    </a>
                </li>
            }
        </ul>
    </li>
    <li class="nav-item"><a href="/blog" class="nav-link">وبلاگ</a></li>
    <li class="nav-item"><a href="/about" class="nav-link">درباره ما</a></li>
    <li class="nav-item"><a href="/contact" class="nav-link">تماس با ما</a></li>
    <li class="nav-item user-menu" id="user-menu"></li>
</ul>

<!-- Right Side Icons -->
<div class="others-options d-flex align-items-center">

    <!-- 🔔 Notification -->
    <div class="dropdown">
        <a href="javascript:void(0)"
           class="nav-link position-relative notification-btn"
           data-bs-toggle="dropdown">

            <i class="flaticon-bell text-white fs-5"></i>

            @if (Model.UnreadNotifications > 0)
            {
                <span id="notif-count"
                      class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle">
                    @Model.UnreadNotifications
                </span>
            }
        </a>

        <ul class="dropdown-menu dropdown-menu-end notification-dropdown shadow"
            style="width:220px; max-height:360px; overflow:auto">

            @if (!Model.LastNotifications.Any())
            {
                <li class="text-center text-muted p-3">
                    اعلانی وجود ندارد
                </li>
            }
            else
            {
                foreach (var n in Model.LastNotifications)
                {
                    <li class="dropdown-item @(n.IsRead ? "" : "fw-bold")">
                        <div>@n.Title</div>
                        <small class="text-muted d-block">@n.PersianDate</small>
                    </li>
                }

                <li><hr class="dropdown-divider"></li>
                <li>
                    <a href="javascript:void(0)"
                       id="go-to-notifications"
                       class="dropdown-item text-center text-primary">
                        مشاهده همه اعلان‌ها
                    </a>
                </li>
            }
        </ul>
    </div>

    <!-- 🛒 Cart -->
    <a href="javascript:void(0)"
       id="cart-link"
       class="nav-link position-relative">

        <i class="flaticon-shopping-basket text-white fs-5"></i>

        <span id="cart-count"
              class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle"
              style="display:none;">
            0
        </span>
    </a>

</div>
